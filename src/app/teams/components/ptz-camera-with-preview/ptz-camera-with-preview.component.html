<div class="ptz-camera">
  <div class="ptz-camera__control-pane">
    @if(previewEnable()===true)
    {
    <div class="ptz-camera__control-column">
      <span class="ptz-camera__control-column__title">Camera Preview</span>
      <div class="ptz-camera__control-column__preview">
        <div class="ptz-camera__control-column__preview--background">
          <img
            class="ptz-camera__control-column__preview--background--img"
            [src]="preview()"
          />
        </div>
        <!--onerror="this.src='fallback-image.jpg';"-->
        <div class="ptz-camera__control-column__preview--controls">
          <button
            class="ptz-button ptz-button--pan-tilt ptz-button--pan-tilt--up"
            (pointerdown)="move(PtzDirection.Up, true, $event)"
            (pointerup)="move(PtzDirection.Up, false, $event)"
            (pointerout)="move(PtzDirection.Up, false, $event)"
          >
            <img src="assets/images/icons/navigation/chevron-up.svg" />
          </button>
          <button
            class="ptz-button ptz-button--pan-tilt ptz-button--pan-tilt--down"
            (pointerdown)="move(PtzDirection.Down, true, $event)"
            (pointerup)="move(PtzDirection.Down, false, $event)"
            (pointerout)="move(PtzDirection.Down, false, $event)"
          >
            <img src="assets/images/icons/navigation/chevron-down.svg" />
          </button>
          <button
            class="ptz-button ptz-button--pan-tilt ptz-button--pan-tilt--left"
            (pointerdown)="move(PtzDirection.Left, true, $event)"
            (pointerup)="move(PtzDirection.Left, false, $event)"
            (pointerout)="move(PtzDirection.Left, false, $event)"
          >
            <img src="assets/images/icons/navigation/chevron-left.svg" />
          </button>
          <button
            class="ptz-button ptz-button--pan-tilt ptz-button--pan-tilt--right"
            (pointerdown)="move(PtzDirection.Right, true, $event)"
            (pointerup)="move(PtzDirection.Right, false, $event)"
            (pointerout)="move(PtzDirection.Right, false, $event)"
          >
            <img src="assets/images/icons/navigation/chevron-right.svg" />
          </button>
        </div>
        <button
          class="ptz-button ptz-button--zoom ptz-button--zoom--in"
          (pointerdown)="zoomIn(true, $event)"
          (pointerup)="zoomIn(false, $event)"
          (pointerout)="zoomIn(false, $event)"
        >
          <img src="assets/images/icons/camera/zoom-in.svg" />
        </button>

        <button
          class="ptz-button ptz-button--zoom ptz-button--zoom--out"
          (pointerdown)="zoomOut(true, $event)"
          (pointerup)="zoomOut(false, $event)"
          (pointerout)="zoomOut(false, $event)"
        >
          <img src="assets/images/icons/camera/zoom-out.svg" />
        </button>
      </div>
    </div>
  }
  @else {
    <div class="ptz-camera__control-row">
      <app-d-pad
        (homePress)="home($event)"
        (directionChange)="onDpadDirectionChange($event)"
      ></app-d-pad>
      <div class="zoom-grid">
        <button
          class="teams-btn-round"
          (pointerdown)="zoomIn(true, $event)"
          (pointerup)="zoomIn(false, $event)"
          (pointerout)="zoomIn(false, $event)"
        >
          <img
            class="teams-btn-round__image"
            src="./assets/images/icons/camera/zoom-in.svg"
          />
        </button>
        <div class="zoom-grid__title">Zoom</div>
        <button
          class="teams-btn-round"
          (pointerdown)="zoomOut(true, $event)"
          (pointerup)="zoomOut(false, $event)"
          (pointerout)="zoomOut(false, $event)"
        >
          <img
            class="teams-btn-round__image"
            src="./assets/images/icons/camera/zoom-out.svg"
          />
        </button>
      </div>
    </div>

  }
    <div class="ptz-camera__control-column">
      <span class="ptz-camera__control-column__title">Camera Presets</span>
      <div class="ptz-camera__control-column__buttons">
        @for (item of presets; track item;) {
        <button
          class="preset-button"
          (pointerdown)="preset($index, true, $event)"
          (pointerup)="preset($index, false, $event)"
          (pointerout)="preset($index, false, $event)"
          [class.selected]="item.active()"
        >
          {{ item.name }}
        </button>
        }
      </div>
    </div>

    <div class="ptz-camera__control-column">
      <span class="ptz-camera__control-column__title">Additional Controls</span>
      <div class="ptz-camera__control-column__buttons">
        <button
          class="settings-button"
          (pointerdown)="toggleAutoFraming(true, $event)"
          (pointerup)="toggleAutoFraming(false, $event)"
          (pointerout)="toggleAutoFraming(false, $event)"
          [class.selected]="AutoFrameEnabled()"
        >
          <img src="./assets/images/icons/camera/auto-framing.svg" />
          Auto Framing
        </button>
        <button
          class="settings-button privacy"
          (pointerdown)="togglePrivacy(true, $event)"
          (pointerup)="togglePrivacy(false, $event)"
          (pointerout)="togglePrivacy(false, $event)"
          [class.selected]="PrivacyEnabled()"
        >
          <img src="./assets/images/icons/camera/privacy.svg" />
          Privacy
        </button>
      </div>
    </div>

    <img
      class="ptz-camera__icon"
      src="./assets/images/icons/camera/ptz-camera.svg"
    />
  </div>
</div>
